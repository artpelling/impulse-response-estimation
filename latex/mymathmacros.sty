\ProvidesPackage{mymathmacros}

% MATH PREAMBLE
% ====================================================================================================
\usepackage{amsmath} \usepackage{amssymb} \usepackage{mathdots}
\usepackage{mathtools} \mathtoolsset{showonlyrefs, mathic=true}
\usepackage{xfrac} \usepackage{stackengine} \usepackage{relsize}
\usepackage{etoolbox} \usepackage{xparse}
%\usepackage[utopia,cal=cmcal,uppercase=upright,greekuppercase=upright]{mathdesign}

% ENVIRONMENTS
% ====================================================================================================
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{remark}{Remark}[section]
\newtheorem{condition}{Condition}[section]
\newtheorem{example}{Example}[section]

% ARRAYS & MATRICES
% ====================================================================================================
\delimitershortfall=0pt \BeforeBeginEnvironment{array}{\left(}
  \AtBeginEnvironment{array}{\renewcommand\arraystretch{1.2}}
  \AfterEndEnvironment{array}{\right)}
\AtBeginEnvironment{bmatrix}{\renewcommand\arraystretch{1}}


% SETS
% ====================================================================================================
\NewDocumentCommand{\R}{oo}{\ensuremath{\mathbb{R}\IfValueTF{#1}{\IfValueTF{#2}{^{#1\times#2}}{^#1}}{}}}
\NewDocumentCommand{\C}{oo}{\ensuremath{\mathbb{C}\IfValueTF{#1}{\IfValueTF{#2}{^{#1\times#2}}{^#1}}{}}}
\NewDocumentCommand{\Z}{oo}{\ensuremath{\mathbb{Z}\IfValueTF{#1}{\IfValueTF{#2}{^{#1\times#2}}{^#1}}{}}}
\NewDocumentCommand{\N}{oo}{\ensuremath{\mathbb{N}\IfValueTF{#1}{\IfValueTF{#2}{^{#1\times#2}}{^#1}}{}}}
\NewDocumentCommand{\Q}{oo}{\ensuremath{\mathbb{Q}\IfValueTF{#1}{\IfValueTF{#2}{^{#1\times#2}}{^#1}}{}}}
\NewDocumentCommand{\El}{O{2}}{\ensuremath{\mathscr{L}^{#1}}}
\NewDocumentCommand{\el}{O{2}}{\ensuremath{\ell^{#1}}}


% FUNCTIONS
% ====================================================================================================
\NewDocumentCommand{\bigO}{m}{\ensuremath{\mathcal{O}(#1)}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\NewDocumentCommand{\norm}{sO{2}m}{\IfBooleanTF#1{\left\lVert#3\right\rVert}{\left\lVert#3\right\rVert_{#2}}} % norm
\NewDocumentCommand{\hnorm}{O{2}m}{\norm[\Hardy_#1]{#2}} % Hardy norm
\NewDocumentCommand{\inner}{sO{2}mm}{\IfBooleanTF#1{\langle#3,\,#4\rangle}{\langle#3,\,#4\rangle_{#2}}} % inner product
\RenewDocumentCommand{\exp}{m}{\ensuremath{e^{#1}}}
\let\oldlog\log\RenewDocumentCommand{\log}{om}{\ensuremath{\oldlog\IfValueTF{#1}{_{#1}}{}\left(#2\right)}}
\let\oldln\ln\RenewDocumentCommand{\ln}{m}{\ensuremath{\oldln\left(#1\right)}}
\let\oldsin\sin\RenewDocumentCommand{\sin}{m}{\ensuremath{\oldsin\left(#1\right)}}
\let\oldcos\cos\RenewDocumentCommand{\cos}{m}{\ensuremath{\oldcos\left(#1\right)}}
\NewDocumentCommand{\rank}{m}{\ensuremath{\operatorname{rank}\left(#1\right)}}
\NewDocumentCommand{\diag}{m}{\ensuremath{\operatorname{diag}\left(#1\right)}}
\NewDocumentCommand{\blkdiag}{m}{\ensuremath{\operatorname{blk\,diag}\left(#1\right)}}
\NewDocumentCommand{\trace}{m}{\ensuremath{\operatorname{trace}\left(#1\right)}}
\RenewDocumentCommand{\Re}{m}{\operatorname{Re}\left\{#1\right\}}
\RenewDocumentCommand{\Im}{m}{\operatorname{Im}\left\{#1\right\}}

% UNITS
% ====================================================================================================
\usepackage{siunitx}
%\sisetup{output-exponent-marker=\ensuremath{\mathrm{e}}}
\NewDocumentCommand{\dB}{}{\,\unit{\decibel}}
\NewDocumentCommand{\seconds}{}{\,\unit{\second}}
\NewDocumentCommand{\Hz}{}{\,\unit{\hertz}}
\NewDocumentCommand{\kHz}{}{\,\unit{\kilo\hertz}}
\NewDocumentCommand{\m}{}{\,\unit{\metre}}
\NewDocumentCommand{\cm}{}{\,\unit{\centi\metre}}
\NewDocumentCommand{\mm}{}{\,\unit{\milli\metre}}
\NewDocumentCommand{\Pa}{}{\,\unit{\pascal}}

% SYMBOLS
% ====================================================================================================
\NewDocumentCommand{\regtm}{}{\textsuperscript{(R)}}
\NewDocumentCommand{\tm}{}{\textsuperscript{\texttrademark}}
